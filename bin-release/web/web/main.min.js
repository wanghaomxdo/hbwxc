var CapabilitiesTest=function(e){function t(){e.call(this);var t=[{text:"移动设备: "+egret.Capabilities.isMobile+"\n",style:{size:17,fontFamily:"楷体"}},{text:"语言代码: "+egret.Capabilities.language+"\n",style:{size:17,fontFamily:"楷体"}},{text:"操作系统: "+egret.Capabilities.os+"\n",style:{size:17,fontFamily:"楷体"}},{text:"运行类型: "+egret.Capabilities.runtimeType+"\n",style:{size:17,fontFamily:"楷体"}}],n=new egret.TextField;n.textFlow=t,this.addChild(n)}__extends(t,e);var n=(__define,t);n.prototype;return t}(egret.Sprite);egret.registerClass(CapabilitiesTest,"CapabilitiesTest");var ChangePlace=function(e){function t(){e.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.onAddtoStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.onAddtoStage=function(){function e(e){i=e.currentTarget,s=e.stageX-i.x,o=e.stageY-i.y,this.addChild(i),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,n,this)}function t(e){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,n,this)}function n(e){i.x=e.stageX-s,i.y=e.stageY-o}var i,s,o,r=new egret.Shape;r.graphics.beginFill(16711680),r.graphics.drawCircle(25,25,25),r.graphics.endFill(),this.addChild(r);var a=new egret.Shape;a.graphics.beginFill(255),a.graphics.drawRect(0,0,100,100),a.graphics.endFill(),this.addChild(a),r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e,this),r.addEventListener(egret.TouchEvent.TOUCH_END,t,this),a.touchEnabled=!0,a.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e,this),a.addEventListener(egret.TouchEvent.TOUCH_END,t,this)},t}(egret.DisplayObjectContainer);egret.registerClass(ChangePlace,"ChangePlace");var DeviceOrientationExample=function(e){function t(){e.call(this),this.label=new egret.TextField,this.label.y=50,this.label.x=50,this.addChild(this.label);var t=new egret.DeviceOrientation;t.addEventListener(egret.Event.CHANGE,this.onOrientation,this),t.start()}__extends(t,e);var n=(__define,t),i=n.prototype;return i.onOrientation=function(e){this.label.text="方向: Z轴:"+e.alpha+"\n,X轴:"+e.beta+"\n,Y轴:"+e.gamma},t}(egret.DisplayObjectContainer);egret.registerClass(DeviceOrientationExample,"DeviceOrientationExample");var GameContainer=function(e){function t(){e.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.onAddtoStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.onAddtoStage=function(){var e=game.createBitmapByName("index"),t=game.createBitmapByName("corner_mark_4"),n=new TextLow,i=new MusicUI;this.addChild(e),this.addChild(t),this.addChild(n),this.addChild(i),t.x=100,t.y=500,e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){i.onTouch()},this)},t}(egret.DisplayObjectContainer);egret.registerClass(GameContainer,"GameContainer");var GeolocationTest=function(e){function t(){e.call(this),this.label=new egret.TextField,this.label.x=320,this.addChild(this.label),this.label.size=20,this.label.fontFamily="楷体",this.label.text="暂未获取到经纬度信息",this.label.anchorOffsetX=this.label.width;var t=new egret.Geolocation;t.addEventListener(egret.Event.CHANGE,this.onGotLocation,this),t.once(egret.GeolocationEvent.PERMISSION_DENIED,this.userDenied,this),t.addEventListener(egret.GeolocationEvent.UNAVAILABLE,this.unAvailable,this),t.start()}__extends(t,e);var n=(__define,t),i=n.prototype;return i.onGotLocation=function(e){this.label.text="纬度："+e.latitude.toFixed(4)+"海拔："+e.altitude+"n经度"+e.longitude.toFixed(4)+"速度"+e.speed,this.label.anchorOffsetX=this.label.width/2;var t=new PostUrl;this.addChild(t)},i.userDenied=function(e){this.label.text="用户拒绝访问位置信息，获取位置信息失败",this.label.anchorOffsetX=this.label.width/2},i.unAvailable=function(e){this.label.text="获取位置信息失败: "+e.errorMessage+"n错误类型: "+e.errorType,this.label.anchorOffsetX=this.label.width/2},t}(egret.DisplayObjectContainer);egret.registerClass(GeolocationTest,"GeolocationTest");var PostUrl=function(e){function t(){e.call(this),this.sendGetRequest()}__extends(t,e);var n=(__define,t),i=n.prototype;return i.sendGetRequest=function(){var e=new egret.TextField;this.statusGetLabel=e,e.size=18,e.text="GET request being sent to httpbin.org",this.addChild(e),e.x=50,e.y=140;var t=new egret.HttpRequest;t.responseType=egret.HttpResponseType.TEXT;var n="?format=2&cityname=%E4%B8%8A%E6%B5%B7&key=fd64d3df562fd4c89c4fe0e95d08151a";t.open("http://v.juhe.cn/weather/index"+n,egret.HttpMethod.GET),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(),t.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),t.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this)},i.onGetComplete=function(e){var t=e.currentTarget;alert(t.response),console.log("get data : ",t.response);var n=new egret.TextField;n.size=18,n.text="GET response: \n"+t.response.substring(0,50)+"...",this.addChild(n),n.x=50,n.y=70,this.statusGetLabel.text="Get GET response!"},i.onGetIOError=function(e){console.log("get error : "+e)},i.onGetProgress=function(e){console.log("get progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},t}(egret.DisplayObjectContainer);egret.registerClass(PostUrl,"PostUrl");var SoundExample=function(e){function t(){e.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.onAddtoStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.onAddtoStage=function(){this.startLoad()},i.startLoad=function(){var e=new egret.URLLoader;e.dataFormat=egret.URLLoaderDataFormat.SOUND,e.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this);var t=RES.getRes("mp3").url,n=new egret.URLRequest(t);e.load(n)},i.onLoadComplete=function(e){var t=e.target,n=t.data;this.sound=n,this._btn=game.createBitmapByName("disc"),this._btn.touchEnabled=!0,this._btn.anchorOffsetX=this._btn.width/2,this._btn.x=this.stage.stageWidth/2,this._btn.anchorOffsetY=this._btn.height/2,this._btn.y=350,this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.addChild(this._btn),this._muBtn=game.createBitmapByName("needle"),this._muBtn.anchorOffsetX=this._muBtn.width/4,this._muBtn.anchorOffsetY=0,this._muBtn.x=450,this.addChild(this._muBtn)},i.round=function(){this._btn.rotation+=3},i.onTouch=function(e){var t=this.sound,n=this.soundChannel;egret.Tween.get(this._muBtn);return n?(console.log(n),n.stop(),this.soundChannel=null,this._muBtn.rotation=0,void this.removeEventListener(egret.Event.ENTER_FRAME,this.round,this)):(this._muBtn.rotation=15,this.addEventListener(egret.Event.ENTER_FRAME,this.round,this),n=t.play(0,-1),console.log(t.length),n.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),void(this.soundChannel=n))},i.onSoundComplete=function(e){console.log("onSoundComplete")},t}(egret.DisplayObjectContainer);egret.registerClass(SoundExample,"SoundExample");var TextLow=function(e){function t(){e.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.onAddToStage=function(e){this._txInfo=new egret.TextField,this._txInfo.size=24,this._txInfo.textColor=0,this._txInfo.lineSpacing=10,this._txInfo.multiline=!0,this._txInfo.x=30,this._txInfo.y=30,this._txInfo.textColor=0,this.addChild(this._txInfo);var t=this;t.isComplete=!0;var n=function(){t.isComplete=!0};t.isComplete=!1,this.typerEffect(this._txInfo,"每个字符延迟150毫秒调用，实现打字机效果\n",150,n)},i.typerEffect=function(e,t,n,i){void 0===t&&(t=""),void 0===n&&(n=200),void 0===i&&(i=null);for(var s=t.split(""),o=s.length,r=0;o>r;r++)egret.setTimeout(function(){e.appendText(s[Number(this)]),Number(this)>=o-1&&null!=i&&i()},r,n*r)},t}(egret.DisplayObjectContainer);egret.registerClass(TextLow,"TextLow");var Main=function(e){function t(){e.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.onAddToStage=function(e){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},i.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},i.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},i.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},i.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},i.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},i.createGameScene=function(){var e=new PostUrl;this.addChild(e)},t}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var game;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.gameList=Array[0],e.color=Array["#CCCCCC"],e}();egret.registerClass(t,"Consts")}(game||(game={}));var game;!function(e){function t(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t}function n(e){var t=RES.getRes(e+"_json"),n=RES.getRes(e+"_png"),i=new egret.MovieClipDataFactory(t,n),s=new egret.MovieClip(i.generateMovieClipData(e));return s}e.createBitmapByName=t,e.createMovieclip=n}(game||(game={}));var JsonpReq=function(){function e(){}var t=(__define,e);t.prototype;return e.process=function(t,n,i){e.completeCall["call_"+e._regID]=n.bind(i),e.startLoader(t,e._regID++)},e.startLoader=function(e,t){var n=document.createElement("script");n.src=e+"JsonpReq.completeCall.call_"+t,document.body.appendChild(n)},e._regID=0,e.completeCall={},e}();egret.registerClass(JsonpReq,"JsonpReq");var LoadingUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var n=(__define,t),i=n.prototype;return i.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},i.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var MusicUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var n=(__define,t),i=n.prototype;return i.createView=function(){var e=this;this._sprcon=new egret.Sprite,this.addChild(this._sprcon),this._sprcon.y=1136,this._muBg=game.createBitmapByName("corner_2"),this._muBg.width=640,this._muBg.height=800,this._muBg.name="muBg",this._sprcon.addChild(this._muBg);var t=game.createBitmapByName("corner_1");t.width=640,t.height=570,this._sprcon.addChild(t);var n=new SoundExample;this._sprcon.addChild(n),this._sprcon.touchEnabled=!0,this._sprcon.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(t){e._touchY=t.stageY},this),this._sprcon.addEventListener(egret.TouchEvent.TOUCH_END,function(t){e._touchY=e._touchY-t.stageY,e._touchY<0&&(e.muOut(),e._touchY=0),e._touchY=0},this)},i.onTouch=function(){var e=egret.Tween.get(this._sprcon);e.to({y:336},1e3,egret.Ease.bounceOut)},i.muOut=function(){var e=egret.Tween.get(this._sprcon);e.to({y:1136},1e3,egret.Ease.quintOut)},t}(egret.Sprite);egret.registerClass(MusicUI,"MusicUI");